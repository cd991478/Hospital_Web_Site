<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>íšŒì› ì •ë³´ ìˆ˜ì •</title>
  <link rel="stylesheet" href="/webjars/bootstrap/4.5.0/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <style>
   body {
   	    font-family: 'Pretendard', sans-serif;
   	}
    </style>
  <script>
    function CheckForm(event) {
        var pw = document.getElementsByName("UserPw")[0].value;
        var pwc = document.getElementsByName("UserPwc")[0].value;
        var name = document.getElementsByName("UserName")[0].value;
        var regnum = document.getElementsByName("UserRegNum")[0].value;
        var phone = document.getElementsByName("UserPhone")[0].value;
        var address = document.getElementsByName("UserAddress1")[0].value;

        var pwPattern = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*?&]{8,20}$/;
        var namePattern = /^[ê°€-í£]{2,4}$/; //2-4ìë¦¬ ì´ë¦„ í—ˆìš©
        var phonePattern = /^\d{11}$/; // 11ìë¦¬ ìˆ«ìë§Œ í—ˆìš©
        var regnumPattern = /^\d{6}$/; // 6ìë¦¬ ìˆ«ìë§Œ í—ˆìš©
        var addressPattern = /^[ê°€-í£]+[ì‹œë„]\s[ê°€-í£]+[êµ¬êµ°]\s[ê°€-í£0-9]+[ë¡œê¸¸]\s\d+(-\d+)?$/;

        // ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
        if (!pwPattern.test(pw)) {
            alert("ë¹„ë°€ë²ˆí˜¸ëŠ” 8~20ìë¦¬ì´ë©°, ì˜ë¬¸ì/ìˆ«ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.");
            event.preventDefault();
            return false;
        }

        // ë¹„ë°€ë²ˆí˜¸ í™•ì¸
        if (pw !== pwc) {
            alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            event.preventDefault();
            return false;
        }

        // ì´ë¦„ ê²€ì¦
        if (!namePattern.test(name)) {
            alert("ì´ë¦„ì€ 2~4ê¸€ì ì‚¬ì´ì˜ í•œê¸€ë§Œ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
            event.preventDefault();
            return false;
        }

        // ì£¼ë¯¼ë²ˆí˜¸ ê²€ì¦
        if (!regnumPattern.test(regnum)) {
            alert("ì£¼ë¯¼ë²ˆí˜¸ëŠ” ì• 6ìë¦¬ ìˆ«ìë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            event.preventDefault();
            return false;
        }

        // ì „í™”ë²ˆí˜¸ ê²€ì¦
        if (!phonePattern.test(phone)) {
            alert("ì „í™” ë²ˆí˜¸ëŠ” ìˆ«ì 11ìë¦¬ë¡œë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”.\nì˜ˆ) 01012341234");
            event.preventDefault();
            return false;
        }

    

        return true;
    }
  </script>

</head>
<body>
<div th:replace="fragments/navbar :: navbar"></div>
<header th:insert="/UserPage/Header.html"></header>
  <div class="container mt-5" style="max-width: 400px;">
    <h3>íšŒì› ì •ë³´ ìˆ˜ì •</h3>
    <hr>
    <form method="POST" th:object="${UserInfo}" id="UserInfoModifyForm" onsubmit="return CheckForm(event)">
      
      <input type="hidden" name="UserId" th:value="*{UserId}" />
      
      <div class="form-group">
        <label for="UserPw">* ë¹„ë°€ë²ˆí˜¸</label>
        <input type="password" name="UserPw" id="UserPw" class="form-control" placeholder="8~20ìë¦¬ ì˜ì–´+ìˆ«ì" required />
		
      </div>
      
      <div class="form-group">
        <label for="UserPwc">* ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
        <input type="password" name="UserPwc" id="UserPwc" class="form-control" placeholder="ë¹„ë°€ë²ˆí˜¸ ë‹¤ì‹œ ì…ë ¥" required />
		<!-- ğŸ”» ë¹„ë°€ë²ˆí˜¸ ì—ëŸ¬ ë©”ì‹œì§€ ìœ„ì¹˜ -->
		<div th:if="${error}" class="text-danger mt-1" th:text="${error}"></div>
      </div>
<hr>
      <div class="form-group">
        <label for="UserName">* ì´ë¦„</label>
        <input type="text" name="UserName" id="UserName" th:value="*{UserName}" class="form-control" placeholder="ì˜ˆ) í™ê¸¸ë™" required />
      </div>

      <div class="form-group">
        <label for="UserRegNum">* ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ ì• 6ìë¦¬</label>
        <input type="text" name="UserRegNum" id="UserRegNum" th:value="*{UserRegNum}" class="form-control" placeholder="ì˜ˆ) 921014" required />
      </div>

	  <div class="form-group">
	      <label>* ì„±ë³„</label><br>
	      <div class="form-check form-check-inline">
	        <input type="radio" name="UserGender" value="1" class="form-check-input" required/>
	        <label class="form-check-label">ì—¬ì„±</label>
	      </div>
	      <div class="form-check form-check-inline">
	        <input type="radio" name="UserGender" value="0" class="form-check-input"/>
	        <label class="form-check-label">ë‚¨ì„±</label>
	      </div>
	    </div>


      <div class="form-group">
        <label for="UserPhone">* íœ´ëŒ€í° ë²ˆí˜¸</label>
        <input type="text" name="UserPhone" id="UserPhone" th:value="*{UserPhone}" class="form-control" placeholder="ì˜ˆ) 01012341234" required />
      </div>

	  <div class="form-group">
	        <label for="UserAddress1">* ì£¼ì†Œ</label>
	        <div class="input-group">
	            <input type="text" name="UserAddress1" id="UserAddress1" class="form-control" placeholder="ì£¼ì†Œ ê²€ìƒ‰ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”" required readonly/>
	            <div class="input-group-append">
	                <button type="button" class="btn btn-secondary" onclick="execDaumPostcode()">ì£¼ì†Œ ê²€ìƒ‰</button>
	            </div>
	        </div>
	    </div>
	  

      <div class="form-group">
        <label for="UserAddress2">* ìƒì„¸ ì£¼ì†Œ</label>
        <input style="width:100%" type="text" name="UserAddress2" id="UserAddress2" th:value="*{UserAddress2}" class="form-control" placeholder="ì˜ˆ) xxë¹Œë¼ 101í˜¸" required />
      </div>
      <hr>
	<div class="mt-3 text-right">
      <button type="submit" class="btn btn-primary" style="float:left;">ì •ë³´ ìˆ˜ì •</button>
      
      <a href="#" th:href="@{/UserPage/DeleteUserId}" class="btn btn-danger" >íšŒì›íƒˆí‡´</a>
      <a href="#" th:href="@{/Home}" class="btn btn-secondary" >ì·¨ì†Œ</a>
      
      
    </div>
    </form>

  

    
  </div>
<br><br>
<script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
 <script>
     function execDaumPostcode() {
         new daum.Postcode({
             oncomplete: function(data) {
                 var fullAddr = ''; 
                 var extraAddr = '';

                 if (data.userSelectedType === 'R') {
                     fullAddr = data.roadAddress;
                 } else {
                     fullAddr = data.jibunAddress;
                 }

                 if (data.bname !== '' && /[ë™|ë¡œ|ê°€]$/g.test(data.bname)) {
                     extraAddr += data.bname;
                 }

                 if (data.buildingName !== '' && data.apartment === 'Y') {
                     extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                 }

                 if (extraAddr !== '') {
                     fullAddr += ' (' + extraAddr + ')';
                 }

                 document.getElementById('UserAddress1').value = fullAddr;
             }
         }).open();
     }
 </script>
  <script src="/webjars/jquery/3.5.1/jquery.min.js"></script>
  <script src="/webjars/bootstrap/4.5.0/js/bootstrap.min.js"></script>
</body>
</html>
